KCPSM3 Assembler log file for program 'int_test.psm'.
Generated by KCPSM3 version 1.20
Ken Chapman (Xilinx Ltd) 2004.

 Addr Code

 000                      ;Interrupt example
 000                      ;
 000                      CONSTANT waveform_port, 02                     ;bit0 will be data
 000                      CONSTANT counter_port, 04
 000                      CONSTANT pattern_10101010, AA
 000                      NAMEREG sA, interrupt_counter
 000                      ;
 000  00A00        start: LOAD interrupt_counter[sA], 00                 ;reset interrupt counter
 001  002AA               LOAD s2, pattern_10101010[AA]                  ;initial output condition
 002  3C001               ENABLE INTERRUPT
 003                      ;
 003  2C202   drive_wave: OUTPUT s2, waveform_port[02]
 004  00007               LOAD s0, 07                                    ;delay size
 005  1C001         loop: SUB s0, 01                                     ;delay loop
 006  35405               JUMP NZ, loop[005]
 007  0E2FF               XOR s2, FF                                     ;toggle waveform
 008  34003               JUMP drive_wave[003]
 009                      ;
 2B0                      ADDRESS 2B0
 2B0  18A01  int_routine: ADD interrupt_counter[sA], 01                  ;increment counter
 2B1  2CA04               OUTPUT interrupt_counter[sA], counter_port[04]
 2B2  38001               RETURNI ENABLE
 2B3                      ;
 3FF                      ADDRESS 3FF                                    ;set interrupt vector
 3FF  342B0               JUMP int_routine[2B0]
